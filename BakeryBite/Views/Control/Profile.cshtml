@model BakeryBite.Models.User

@{
    ViewData["Title"] = "Профиль";
    Layout = "_LayoutSecond";
}

<link rel="stylesheet" href="~/lib/bootstrap/dist/css/Profile.css" />

<div class="profile-container">
    <div class="profile-grid">
        <div class="avatar">
            <h2>Профиль пользователя</h2>
        </div>
        <div class="user-info">
            <p>
                <strong>Имя пользователя:</strong>
                @{
                    string fullName = Model.Patronymic != null && Model.Patronymic.Trim().Length > 0
                    ? $"{Model.Surname} {Model.Name[0]}. {Model.Patronymic[0]}."
                    : $"{Model.Surname} {Model.Name}";
                }
                @fullName
            </p>
            <p><strong>Роль пользователя:</strong> @Model.Role.Name</p>
        </div>
        <div class="action-buttons">
            @if (Model.Role.Name == "Администратор" || Model.Role.Name == "Менеджер Товаров")
            {
                <button type="button" class="btn btn-primary" onclick="redirectToProductsEditor()">Товары</button>
            }
            @if (Model.Role.Name == "Администратор" || Model.Role.Name == "Менеджер Заказов")
            {
                <button type="button" class="btn btn-primary" onclick="redirectToOrderEditor()">Заказы</button>
            }
            <button type="button" class="btn btn-primary" onclick="redirectToProfileEditor()">Редактирование профиля</button>
            @if (Model.Role.Name == "Пользователь")
            {
                <button type="button" class="btn btn-primary" onclick="redirectToUserOrders(@Model.Id)">Мои заказы</button>
            }
            <a href="@Url.Action("Logout", "Control")" class="logout">Выход</a>
        </div>
    </div>
</div>

<script>
    function redirectToProductsEditor() {
        window.location.href = '@Url.Action("ProductsEditor", "Control")';
    }

    function redirectToOrderEditor() {
        window.location.href = '@Url.Action("OrderEditor", "Control")';
    }

    function redirectToProfileEditor() {
        window.location.href = '@Url.Action("ProfileEditor", "Control")';
    }

    function redirectToUserOrders(userId) {
        window.location.href = '@Url.Action("UserOrders", "Control")' + '?userId=' + userId;
    }
</script>
